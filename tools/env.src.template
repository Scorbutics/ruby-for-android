TOOLCHAIN_PREFIX="@CMAKE_CXX_ANDROID_TOOLCHAIN_PREFIX@"
ROOT_DIR="@CMAKE_SOURCE_DIR@"
PLATFORM_VERSION="@ANDROID_PLATFORM_LEVEL@"
HOST="@CMAKE_LIBRARY_ARCHITECTURE@"

TOOLCHAIN_BIN="$(dirname $TOOLCHAIN_PREFIX)"

export ANDROID_API=$PLATFORM_VERSION
export ANDROID_NDK="${TOOLCHAIN_BIN%%/toolchains/*}"

CLANG_TARGET="-target $HOST$PLATFORM_VERSION"
export CC="$TOOLCHAIN_BIN/clang $CLANG_TARGET"
export CXX="$TOOLCHAIN_BIN/clang++ $CLANG_TARGET"
export AR="$TOOLCHAIN_BIN/llvm-ar"
export STRIP="$TOOLCHAIN_BIN/llvm-strip"
export RANLIB="$TOOLCHAIN_BIN/llvm-ranlib"
export LD="$TOOLCHAIN_BIN/ld"
export AS="$CC"

export PATH="$TOOLCHAIN_BIN:$PATH"

export API="$PLATFORM_VERSION"
export TARGET="$HOST"
export TOOLCHAIN="$TOOLCHAIN_BIN/../"

export CFLAGS="$CFLAGS -I${ROOT_DIR}/target/usr/include -I${ROOT_DIR}/target/usr/local/include -O3 -DNDEBUG -U__ANDROID_API__ -D__ANDROID_API__=$ANDROID_API"
export CPPFLAGS="$CPPFLAGS $CFLAGS"
export LDFLAGS="$LDFLAGS -lz -lm -L${ROOT_DIR}/target/usr/lib -L${ROOT_DIR}/target/usr/local/lib"

function log () {
    if [[ $_V -eq 1 ]]; then
        echo "$@"
    fi
}

log "CFLAGS: $CFLAGS"
log "LDFLAGS: $LDFLAGS"
log "PATH: $PATH"
